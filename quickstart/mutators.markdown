---
title: Mutation operators
description: Details of mutation operators provided with PIT
tags: mutators
keywords: mutation testing, mutation operator
layout: default
permalink: /quickstart/mutators/
---

# Overview

PIT currently provides some built-in mutators, of which most are activated by default. The default set can be overridden, and different operators selected, by passing the names of the required operators to the **mutators** parameter. 

Mutations are performed on the byte code generated by the compiler rather than on the source files. This approach has the advantage of being generally much faster and easier to incorporate into a build, but it can sometimes be difficult to simply describe how the mutation operators map to equivalent changes to a Java source file.

The operators are largely designed to be **stable** (i.e not be too easy to detect) and minimise the number of equivalent mutations that they generate. Those operators that do not meet these requirements are not enabled by default.

# Available mutators

We'll briefly describe the available mutators in the following sections. See the [test cases](#TEST_CASES) for
more detailed examples.

Here is the list of available mutators:

(*activated by default*)
- [Conditionals Boundary Mutator](#CONDITIONALS_BOUNDARY)
- [Increments Mutator](#INCREMENTS)
- [Invert Negatives Mutator](#INVERT_NEGS)
- [Math Mutator](#MATH)
- [Negate Conditionals Mutator](#NEGATE_CONDITIONALS)
- [Return Values Mutator](#RETURN_VALS)
- [Void Method Calls Mutator](#VOID_METHOD_CALLS)

(*deactivated by default*)
- [Constructor Calls Mutator](#CONSTRUCTOR_CALLS)
- [Empty returns Mutator](#EMPTY_RETURNS)
- [False Returns Mutator](#FALSE_RETURNS)
- [Inline Constant Mutator](#INLINE_CONSTS)
- [Null returns Mutator](#NULL_RETURNS)
- [Non Void Method Calls Mutator](#NON_VOID_METHOD_CALLS)
- [Primitive returns Mutator](#PRIMITIVE_RETURNS)
- [Remove Conditionals Mutator](#REMOVE_CONDITIONALS)
- [Remove Increments](#REMOVE_INCREMENTS)
- [True returns Mutator](#TRUE_RETURNS)

(*experimental mutators, deactivated by default*)
- [Experimental Argument Propagation](#EXPERIMENTAL_ARGUMENT_PROPAGATION)
- [Experimental Big Integer](#EXPERIMENTAL_BIG_INTEGER)
- [Experimental Member Variable Mutator](#EXPERIMENTAL_MEMBER_VARIABLE)
- [Experimental Naked Receiver](#EXPERIMENTAL_NAKED_RECEIVER)
- [Experimental Switch Mutator](#EXPERIMENTAL_SWITCH)

See the current [code](https://github.com/hcoles/pitest/blob/master/pitest/src/main/java/org/pitest/mutationtest/engine/gregor/config/Mutator.java) for current list (latest development version).

----
#Default Mutators
<a name="CONDITIONALS_BOUNDARY" id="CONDITIONALS_BOUNDARY"></a>

Conditionals Boundary Mutator (CONDITIONALS_BOUNDARY)
-----------------------------------------------------

**Active by default**

The conditionals boundary mutator replaces the relational operators `<, <=, >, >=` 

with their boundary counterpart as per the table below.

| Original conditional | Mutated conditional |
|----------------------|---------------------|
| <                    | <=                  |
| <=                   | <                   |
| \>                   | \>=                 |
| \>=                  | \>                  |
{:.table }

For example

```java
if (a < b) {
  // do something
}
```

will be mutated to

```java
if (a <= b) {
  // do something
}
```

<a name="INCREMENTS" id="INCREMENTS"></a>

Increments Mutator (INCREMENTS)
-------------------------------

**Active by default**

The increments mutator will mutate increments, decrements and assignment
increments and decrements of local variables (stack variables). It will replace
increments with decrements and vice versa.

For example

```java
public int method(int i) {
  i++;
  return i;
}
```

will be mutated to

```java
public int method(int i) {
  i--;
  return i;
}
```

Please note that the increments mutator will be applied to increments of 
**local variables only**. Increments and decrements of member variables will be
covered by the [Math Mutator](#MATH).

<a name="INVERT_NEGS" id="INVERT_NEGS"></a>

Invert Negatives Mutator (INVERT_NEGS)
--------------------------------------

**Active by default**

The invert negatives mutator inverts negation of integer and floating point 
numbers. For example

```java
public float negate(final float i) {
  return -i;
}
```

will be mutated to

```java
public float negate(final float i) {
  return i;
}
```

<a name="MATH" id="MATH"></a>

Math Mutator (MATH)
-------------------

**Active by default**

The math mutator replaces binary arithmetic operations for either integer or 
floating-point arithmetic with another operation. The replacements will be 
selected according to the table below.

| Original conditional | Mutated conditional |
|----------------------|---------------------|
| \+                   | \-                  |
| \-                   | \+                  |
| *                    | /                   |
| /                    | *                   |
| %                    | *                   |
| &                    | \|                  |
| \|                   | &                   |
| ^                    | &                   |
| \<<                  | \>>                 |
| \>>                  | \<<                 |
| \>>>                 | \<<                 |
{:.table}


For example

```java
int a = b + c;
```

will be mutated to

```java
int a = b - c;
```

Keep in mind that the `+` operator on `String`s as in

```java
String a = "foo" + "bar";
```

is **not a mathematical operator** but a string concatenation and will be 
replaced by the compiler with something like

```java
String a = new StringBuilder("foo").append("bar").toString();
```


Please note that the compiler will also use binary arithmetic operations for
increments, decrements and assignment increments and decrements of non-local
variables (member variables) although a special `iinc` opcode for increments 
exists. This special opcode is restricted to local variables (also called stack
variables) and cannot be used for member variables. That means the math mutator
will also mutate

```java
public class A {
  private int i;

  public void foo() {
    this.i++;
  }
}
```

to

```java
public class A {
  private int i;

  public void foo() {
    this.i = this.i - 1;
  }
}
```

See the [Increments Mutator](#INCREMENTS) for details.

<a name="NEGATE_CONDITIONALS" id="NEGATE_CONDITIONALS"></a>

Negate Conditionals Mutator (NEGATE_CONDITIONALS)
-------------------------------------------------

**Active by default**

The negate conditionals mutator will mutate all conditionals found according
to the replacement table below.

| Original conditional | Mutated conditional |
|----------------------|---------------------|
| ==                   | !=                  |
| !=                   | ==                  |
| <=                   | \>                  |
| \>=                  | <                   |
| <                    | \>=                 |
| \>                   | <=                  |
{:.table }

For example

```java
if (a == b) {
  // do something
}
```

will be mutated to

```java
if (a != b) {
  // do something
}
```

This mutator overlaps to a degree with the conditionals boundary mutator, but is less **stable** i.e these
mutations are generally easier for a test suite to detect.

<a name="RETURN_VALS" id="RETURN_VALS"></a>

Return Values Mutator (RETURN_VALS)
-----------------------------------

**Active by default**

The return values mutator mutates the return values of method calls. Depending
on the return type of the method another mutation is used.<sup id="fnref4">[4](#fn4)</sup></a>

| Return Type          | Mutation 
|----------------------|---
| `boolean`            | replace the unmutated return value `true` with `false` and replace the unmutated return value `false` with `true`
| `int` `byte` `short` | if the unmutated return value is `0` return `1`, otherwise mutate to return value `0`
| `long`               | replace the unmutated return value `x` with the result of `x+1`
| `float` `double`     | replace the unmutated return value `x` with the result of `-(x+1.0)` if `x` is not `NAN` and replace `NAN` with `0`
| `Object`             | replace non-`null` return values with `null` and throw a `java.lang.RuntimeException` if the unmutated method would return `null`
{:.table}

For example

```java
public Object foo() {
  return new Object();
}
```

will be mutated to

```java
public Object foo() {
  new Object();
  return null;
}
```

Please note that constructor calls are **not considered void method calls**.
See the [Constructor Call Mutator](#CONSTRUCTOR_CALL) for mutations of 
constructors or the [Non Void Method Call Mutator](#NON_VOID_METHOD_CALL) for
mutations of non void methods.

<a name="VOID_METHOD_CALLS" id="VOID\_METHOD\_CALLS"></a>

Void Method Call Mutator (VOID_METHOD_CALLS)
--------------------------------------------

**Active by default**

The void method call mutator removes method calls to void methods. For example

```java
public void someVoidMethod(int i) {
  // does something
}

public int foo() {
  int i = 5;
  someVoidMethod(i);
  return i;
}
```

will be mutated to

```java
public void someVoidMethod(int i) {
  // does something
}

public int foo() {
  int i = 5;
  return i;
}
```

#Optional Mutators

<a name="CONSTRUCTOR_CALLS" id="CONSTRUCTOR_CALLS"></a>

Constructor Call Mutator (CONSTRUCTOR_CALLS)
--------------------------------------------
Optional mutator that replaces constructor calls with `null` values. For example

```java
public Object foo() {
  Object o = new Object();
  return o;
}
```

will be mutated to

```java
public Object foo() {
  Object o = null;
  return o;
}
```

Please note that this mutation is fairly unstable and likely to cause **`NullPointerException`s** even
with weak test suites.

This mutator does not affect non constructor method calls. See [Void Method Call Mutator](#VOID_METHOD_CALL) for 
mutations of void methods and
[Non Void Method Call Mutator](#NON_VOID_METHOD_CALL) for mutations of non void
methods.

<a name="EMPTY_RETURNS" id="EMPTY_RETURNS"></a>

Empty returns Mutator (EMPTY\_RETURNS)
--------------------------------------

Replaces return values with an 'empty' value for that type as follows

* java.lang.String -> ""
* java.util.Optional -> Optional.empty()
* java.util.List -> Collections.emptyList()
* java.util.Collection -> Collections.emptyList()
* java.util.Set -> Collections.emptySet()
* java.lang.Integer -> 0
* java.lang.Short -> 0
* java.lang.Long -> 0
* java.lang.Character -> 0
* java.lang.Float -> 0
* java.lang.Double -> 0

Pitest will filter out equivalent mutations to methods that are already hard coded to return the empty value.

<a name="FALSE_RETURNS" id="FALSE_RETURNS"></a>

False returns Mutator (FALSE\_RETURNS)
-------------------------------------

Replaces primitive and boxed boolean return values with false.

Pitest will filter out equivalent mutations to methods that are already hard coded to return false.

<a name="INLINE_CONSTS" id="INLINE_CONSTS"></a>

Inline Constant Mutator (INLINE_CONSTS)
---------------------------------------

The inline constant mutator mutates inline constants. An inline constant is a
literal value assigned to a non-final variable, for example

```java
public void foo() {
  int i = 3;
  // do something with i
}
```

Depending on the type of the inline constant another mutation is used. The rules
are a little complex due to the different ways that apparently similar Java statements
are converted to byte code.

| Constant Type            | Mutation
|--------------------------|---
| `boolean`                | replace the unmutated value `true` with `false` and replace the unmutated value `false` with `true`
| `integer` `byte` `short` | replace the unmutated value `1` with `0`, `-1` with `1`, `5` with `-1` or otherwise increment the unmutated value by one. <sup id="fnref1">[1](#fn1)</sup>
| `long`                   | replace the unmutated value `1` with `0`, otherwise increment the unmutated value by one.
| `float`                  | replace the unmutated values `1.0` and `2.0` with `0.0` and replace any other value with `1.0` <sup id="fnref2">[2](#fn2)</sup>
| `double`                 | replace the unmutated value `1.0` with `0.0` and replace any other value with `1.0` <sup id="fnref3">[3](#fn3)</sup>
{:.table}


For example

```java
public int foo() {
  int i = 42;
  return i;
}
```

will be mutated to

```java
public int foo() {
  int i = 43;
  return i;
}
```

Please note that the compiler might optimize the use of final variables 
(regardless whether those are stack variables or member variables). For example
the following code

```java
public class A {
  private static final int VAR = 13;
  
  public String foo() {
    final int i = 42;
    return "" + VAR + ":" + i;
  }
}
```

will be changed/optimized by the compiler to

```java
public class A {
  public String foo() {
    return "13:42";
  }
}
```

In such situations the mutation engine can not mutate any variable.

<a name="NULL_RETURNS" id="NULL_RETURNS"></a>

Null returns Mutator (NULL\_RETURNS)
--------------------------------------

Replaces return values with null. Methods that can be mutated by the EMPTY_RETURNS mutator or that are directly annotated with NotNull will not be mutated.

Pitest will filter out equivalent mutations to methods that are already hard coded to return null.

<a name="NON_VOID_METHOD_CALLS" id="NON_VOID_METHOD_CALLS"></a>

Non Void Method Call Mutator (NON\_VOID\_METHOD\_CALLS)
----------------------------------------------------

The non void method call mutator removes method calls to non void methods.
Their return value is replaced by the Java Default Value for that specific
type. See the table below.

Table: Java Default Values for Primitives and Reference Types

| Type                        | Default value |
|-----------------------------|---------------|
| `boolean`                   | `false`       |
| `int` `byte` `short` `long` | `0`           |
| `float` `double`            | `0.0`         |
| `char`                      | `'\u0000'`    |
| `Object`                    | `null`        |
{:.table}

For example

```java
public int someNonVoidMethod() {
  return 5;
}

public void foo() {
  int i = someNonVoidMethod();
  // do more stuff with i
}
```

will be mutated to

```java
public int someNonVoidMethod() {
  return 5;
}

public void foo() {
  int i = 0;
  // do more stuff with i
}
```

and for method calls returning an object type the call

```java
public Object someNonVoidMethod() {
  return new Object();
}

public void foo() {
  Object o = someNonVoidMethod();
  // do more stuff with o
}
```

will be mutated to

```java
public Object someNonVoidMethod() {
  return new Object();
}

public void foo() {
  Object o = null;
  // do more stuff with o
}
```

Please note that this mutation is fairly unstable for some types (especially Objects where
**`NullPointerException`s** are likely) and may also create equivalent mutations if
it replaces a method that already returns one of the default values without also having
a side effect.

This mutator does not affect void methods or constructor calls. See 
[Void Method Call Mutator](#VOID_METHOD_CALL) for mutations of void methods and
[Constructor Call Mutator](#CONSTRUCTOR_CALL) for mutations of constructors.

<a name="PRIMITIVE_RETURNS" id="PRIMITIVE_RETURNS"></a>

Primitive returns Mutator (PRIMITIVE\_RETURNS)
----------------------------------------------

Replaces int, short, long, char, float and double return values with 0.

Pitest will filter out equivalent mutations to methods that are already hard coded to return 0.

<a name="REMOVE_CONDITIONALS" id="REMOVE_CONDITIONALS"></a>

Remove Conditionals Mutator (REMOVE_CONDITIONALS)
-------------------------------------------------

The remove conditionals mutator will remove all conditionals statements such that the guarded statements always
execute

For example


```java
if (a == b) {
  // do something
}
```

will be mutated to

```java
if (true) {
  // do something
}
```

Although not currently enabled by default it is highly recommended that you enable it if you wish to ensure your test suite has full coverage of conditional statements.

As shown above the basic remove conditionals mutator ensures that the statements following the conditional always execute. It will also only mutate only equality checks (eg ==, !=).

Additional specialised versions of the mutator exist that will ensure the block never executes so

```java
if (a == b) {
  // do something
}
```

will be mutated to

```java
if (false) {
  // do something
}
```

If an else block is present it will always execute 

```java
if (a == b) {
  // do something
} else {
  // do something else
}
```

will be mutated to

```java
if (false) {
  // do something
} else {
  // do something else
}
```

Specialisations also exist that will mutate the bytecode instructions for order checks (eg <=, >).

The available specialisations are

* REMOVE_CONDITIONALS_EQ_IF
* REMOVE_CONDITIONALS_EQ_ELSE
* REMOVE_CONDITIONALS_ORD_IF
* REMOVE_CONDITIONALS_ORD_ELSE

The names reflect which branch will be forced to execute (the "if" or the "else") and the type of checks that will be mutated. 

The reason these are not enabled by default is that there is a large degree of overlap in the tests required to kill these mutations and those required to kill mutations from other default operators such as the conditional boundaries mutator.

<a name="REMOVE_INCREMENTS" id="REMOVE_INCREMENTS"></a>

Remove Increments Mutator (REMOVE\_INCREMENTS)
-------------------------------------

Optional mutator that removes local variable increments.

<a name="EXPERIMENTAL_MEMBER_VARIABLE" id="EXPERIMENTAL_MEMBER_VARIABLE"></a>

<a name="TRUE_RETURNS" id="TRUE_RETURNS"></a>

True returns Mutator (TRUE\_RETURNS)
-------------------------------------

Replaces primitive and boxed boolean return values with true.

Pitest will filter out equivalent mutations to methods that are already hard coded to return true.


#Experimental Mutators

<a name="EXPERIMENTAL_ARGUMENT_PROPAGATION" id="EXPERIMENTAL_ARGUMENT_PROPAGATION"></a>

Experimental Argument Propagation (EXPERIMENTAL\_ARGUMENT\_PROPAGATION)
-------------------------------------

Experimental mutator that replaces method call with one of its parameters of matching type.

<a name="EXPERIMENTAL_BIG_INTEGER" id="EXPERIMENTAL_BIG_INTEGER"></a>

Experimental Big Integer (EXPERIMENTAL\_BIG\_INTEGER)
-------------------------------------

Experimental mutator that swaps big integer methods.

<a name="EXPERIMENTAL_NAKED_RECEIVER" id="EXPERIMENTAL_NAKED_RECEIVER"></a>

Experimental Naked Receiver (EXPERIMENTAL\_NAKED\_RECEIVER)
-------------------------------------

Experimental mutator that replaces method call with a naked receiver.

<a name="EXPERIMENTAL_MEMBER_VARIABLE" id="EXPERIMENTAL_MEMBER_VARIABLE"></a>

Experimental Member Variable Mutator (EXPERIMENTAL\_MEMBER\_VARIABLE)
-------------------------------------------------------------------

The experimental member variable mutator mutates classes by removing assignments
to member variables. The mutator can even remove assignments to final members.
The members will be initialized with their Java Default Value for the specific
type. See the table below.

Table: Java Default Values for Primitives and Reference Types


| Type                        | Default value |
|-----------------------------|---------------|
| `boolean`                   | `false`       |
| `int` `byte` `short` `long` | `0`           |
| `float` `double`            | `0.0`         |
| `char`                      | `'\u0000'`    |
| `Object`                    | `null`        |
{:.table}

For example

```java
public class MutateMe {
    private final int x = 5;
    //...
}
```

will be mutated to

```java
  public class MutateMe {
    private final int x = 0;
    ...
  }
```

**Please Note: This mutator is likely to create equivalent mutations** if a
member variable is **explicitly** initialized with the Java default value for 
the specific type of the member variable as in

```java
public class EquivalentMutant {
    private int x = 0;
}
```

<a name="EXPERIMENTAL_SWITCH" id="EXPERIMENTAL_SWITCH"></a>

Experimental Switch Mutator (EXPERIMENTAL_SWITCH)
-------------------------------------------------

The switch mutator finds the first label within a switch statement that differs from the default label. It mutates the switch statement by replacing the default label (wherever it is used) with this label. All the other labels are replaced by the default one.

*Thanks to Stefan Penndorf who contributed this documentation.*

<hr/>

1. <a name="fn1" id="fn1"></a> Integer numbers and booleans are actually represented in the same way be the JVM,
  it is therefore never safe if change a 0 to anything but a 1 or a 1 to anything but a 0.
  [↩](#fnref1)
2. <a name="fn2" id="fn2"></a> Floating point numbers are always changed to 1 rather than adding 1 to the original value
  as this would result in equivalent mutations. Adding 1 to a large floating point number
  doesn't necessarily change its value due to the imprecise way in which floats are represented.
  [↩](#fnref2)
3. <a name="fn3" id="fn3"></a> See note above which applies to both floats and doubles. [↩](#fnref3)
4. <a name="fn4" id="fn4"></a> The strategy used by this mutator was translated from code in the Jumble project
  [↩](#fnref4)
